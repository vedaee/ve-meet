{"ast":null,"code":"var _jsxFileName = \"C:\\\\projects\\\\Ve Meet TEST\\\\client\\\\src\\\\components\\\\GuestRoom.js\",\n  _s = $RefreshSig$();\n// src/components/GuestRoom.js\nimport React, { useEffect, useRef, useState } from 'react';\nimport io from 'socket.io-client';\nimport './Room.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io.connect('https://localhost:5000'); // Change if using ngrok or live domain\n\nconst GuestRoom = () => {\n  _s();\n  const localVideoRef = useRef(null);\n  const [localStream, setLocalStream] = useState(null);\n  const [name, setName] = useState('');\n  const [roomCode, setRoomCode] = useState('');\n  const [joined, setJoined] = useState(false);\n  const [remoteVideos, setRemoteVideos] = useState([]);\n  useEffect(() => {\n    socket.on('all-users', users => {\n      console.log('All users:', users);\n    });\n    socket.on('user-joined', ({\n      id,\n      name\n    }) => {\n      console.log(`${name} joined.`);\n    });\n    socket.on('user-disconnected', socketId => {\n      setRemoteVideos(prev => prev.filter(v => v.id !== socketId));\n    });\n    socket.on('user-video', ({\n      id,\n      stream,\n      name\n    }) => {\n      if (!remoteVideos.find(v => v.id === id)) {\n        setRemoteVideos(prev => [...prev, {\n          id,\n          stream,\n          name\n        }]);\n      }\n    });\n  }, [remoteVideos]);\n  const handleJoin = async () => {\n    if (!name || !roomCode) {\n      alert('Enter name and room code');\n      return;\n    }\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      });\n      localVideoRef.current.srcObject = stream;\n      setLocalStream(stream);\n      socket.emit('join-room', {\n        roomCode,\n        name\n      });\n      socket.emit('send-video', {\n        roomCode,\n        stream: stream.id,\n        name\n      });\n      setJoined(true);\n    } catch (err) {\n      console.error('Media error:', err);\n      alert('Could not access camera/mic');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"room-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-grid\",\n      children: [!joined && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Your Name\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Room Code\",\n          value: roomCode,\n          onChange: e => setRoomCode(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleJoin,\n          children: \"Join\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), joined && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-block\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: localVideoRef,\n            autoPlay: true,\n            muted: true,\n            className: \"video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-name\",\n            children: [name, \" (You)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), remoteVideos.map((v, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-block\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            autoPlay: true,\n            className: \"video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-name\",\n            children: v.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(GuestRoom, \"PMI1DFe8V4OopMwk3DGRgiprJVo=\");\n_c = GuestRoom;\nexport default GuestRoom;\nvar _c;\n$RefreshReg$(_c, \"GuestRoom\");","map":{"version":3,"names":["React","useEffect","useRef","useState","io","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","connect","GuestRoom","_s","localVideoRef","localStream","setLocalStream","name","setName","roomCode","setRoomCode","joined","setJoined","remoteVideos","setRemoteVideos","on","users","console","log","id","socketId","prev","filter","v","stream","find","handleJoin","alert","navigator","mediaDevices","getUserMedia","video","audio","current","srcObject","emit","err","error","className","children","type","placeholder","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","autoPlay","muted","map","idx","_c","$RefreshReg$"],"sources":["C:/projects/Ve Meet TEST/client/src/components/GuestRoom.js"],"sourcesContent":["// src/components/GuestRoom.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport './Room.css';\r\n\r\nconst socket = io.connect('https://localhost:5000'); // Change if using ngrok or live domain\r\n\r\nconst GuestRoom = () => {\r\n  const localVideoRef = useRef(null);\r\n  const [localStream, setLocalStream] = useState(null);\r\n  const [name, setName] = useState('');\r\n  const [roomCode, setRoomCode] = useState('');\r\n  const [joined, setJoined] = useState(false);\r\n  const [remoteVideos, setRemoteVideos] = useState([]);\r\n\r\n  useEffect(() => {\r\n    socket.on('all-users', users => {\r\n      console.log('All users:', users);\r\n    });\r\n\r\n    socket.on('user-joined', ({ id, name }) => {\r\n      console.log(`${name} joined.`);\r\n    });\r\n\r\n    socket.on('user-disconnected', socketId => {\r\n      setRemoteVideos(prev => prev.filter(v => v.id !== socketId));\r\n    });\r\n\r\n    socket.on('user-video', ({ id, stream, name }) => {\r\n      if (!remoteVideos.find(v => v.id === id)) {\r\n        setRemoteVideos(prev => [...prev, { id, stream, name }]);\r\n      }\r\n    });\r\n  }, [remoteVideos]);\r\n\r\n  const handleJoin = async () => {\r\n    if (!name || !roomCode) {\r\n      alert('Enter name and room code');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\r\n      localVideoRef.current.srcObject = stream;\r\n      setLocalStream(stream);\r\n\r\n      socket.emit('join-room', { roomCode, name });\r\n      socket.emit('send-video', { roomCode, stream: stream.id, name });\r\n\r\n      setJoined(true);\r\n    } catch (err) {\r\n      console.error('Media error:', err);\r\n      alert('Could not access camera/mic');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"room-container\">\r\n      <div className=\"video-grid\">\r\n        {!joined && (\r\n          <div className=\"controls\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Your Name\"\r\n              value={name}\r\n              onChange={e => setName(e.target.value)}\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Room Code\"\r\n              value={roomCode}\r\n              onChange={e => setRoomCode(e.target.value)}\r\n            />\r\n            <button onClick={handleJoin}>Join</button>\r\n          </div>\r\n        )}\r\n\r\n        {joined && (\r\n          <>\r\n            <div className=\"video-block\">\r\n              <video ref={localVideoRef} autoPlay muted className=\"video\" />\r\n              <div className=\"video-name\">{name} (You)</div>\r\n            </div>\r\n\r\n            {remoteVideos.map((v, idx) => (\r\n              <div key={idx} className=\"video-block\">\r\n                <video autoPlay className=\"video\" />\r\n                <div className=\"video-name\">{v.name}</div>\r\n              </div>\r\n            ))}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GuestRoom;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}