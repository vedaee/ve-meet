{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import io from\"socket.io-client\";import\"./Room.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io(\"https://abcdef.ngrok.io\",{secure:true});const Room=()=>{const[roomId,setRoomId]=useState(\"\");const[name,setName]=useState(\"\");const[joined,setJoined]=useState(false);const[participants,setParticipants]=useState([]);// {id, name, stream}\nconst[localStream,setLocalStream]=useState(null);const[audioEnabled,setAudioEnabled]=useState(true);const[videoEnabled,setVideoEnabled]=useState(true);const[screenSharing,setScreenSharing]=useState(false);const localVideoRef=useRef();const peersRef=useRef({});// peer connections by socket id\nconst remoteStreamsRef=useRef({});// remote streams by socket id\nconst screenTrackRef=useRef(null);useEffect(()=>{if(!joined)return;// Get user media for host\nnavigator.mediaDevices.getUserMedia({video:true,audio:true}).then(stream=>{setLocalStream(stream);if(localVideoRef.current){localVideoRef.current.srcObject=stream;}socket.emit(\"join-room\",{roomId,name});// Listen to socket events\nsetupSocketListeners(stream);}).catch(err=>{alert(\"Error accessing camera/mic: \"+err.message);});return()=>{// Cleanup on leave\nif(localStream){localStream.getTracks().forEach(t=>t.stop());}Object.values(peersRef.current).forEach(peer=>peer.close());peersRef.current={};remoteStreamsRef.current={};setParticipants([]);socket.offAny();setScreenSharing(false);screenTrackRef.current=null;};},[joined]);const setupSocketListeners=stream=>{socket.off(\"all-users\");socket.off(\"user-joined\");socket.off(\"offer\");socket.off(\"answer\");socket.off(\"ice-candidate\");socket.off(\"user-left\");// Receive all existing users in room\nsocket.on(\"all-users\",users=>{// users: [{ id, name }]\n// Create peer connections to all users (guests)\nusers.forEach(_ref=>{let{id:userId,name:userName}=_ref;if(userId===socket.id)return;// skip self\ncreatePeerConnection(userId,userName,stream,true);});// Add self to participants list\nsetParticipants(prev=>[...prev,{id:socket.id,name,stream},...users.map(_ref2=>{let{id,name}=_ref2;return{id,name,stream:null};})]);});// New user joined\nsocket.on(\"user-joined\",_ref3=>{let{id:userId,name:userName}=_ref3;// Add new user to participants list with null stream (will be updated when track arrives)\nsetParticipants(prev=>{if(prev.find(p=>p.id===userId))return prev;return[...prev,{id:userId,name:userName,stream:null}];});createPeerConnection(userId,userName,stream,false);});// Incoming offer from guest\nsocket.on(\"offer\",async _ref4=>{let{from,offer}=_ref4;const peer=createPeerConnection(from,null,stream,false,true);await peer.setRemoteDescription(new RTCSessionDescription(offer));const answer=await peer.createAnswer();await peer.setLocalDescription(answer);socket.emit(\"answer\",{to:from,answer:peer.localDescription});});// Incoming answer from guest\nsocket.on(\"answer\",async _ref5=>{let{from,answer}=_ref5;const peer=peersRef.current[from];if(!peer)return;await peer.setRemoteDescription(new RTCSessionDescription(answer));});// ICE candidate from guest\nsocket.on(\"ice-candidate\",_ref6=>{let{from,candidate}=_ref6;const peer=peersRef.current[from];if(!peer)return;peer.addIceCandidate(new RTCIceCandidate(candidate)).catch(e=>console.error(\"Error adding ICE candidate\",e));});// User left\nsocket.on(\"user-left\",_ref7=>{let{id:userId}=_ref7;if(peersRef.current[userId]){peersRef.current[userId].close();delete peersRef.current[userId];}if(remoteStreamsRef.current[userId]){delete remoteStreamsRef.current[userId];}setParticipants(prev=>prev.filter(p=>p.id!==userId));});};const createPeerConnection=function(userId,userName,stream,isInitiator){let isOfferAnswer=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;if(peersRef.current[userId])return peersRef.current[userId];const peer=new RTCPeerConnection({iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]});peersRef.current[userId]=peer;// Add local tracks\nif(stream){stream.getTracks().forEach(track=>{peer.addTrack(track,stream);});}peer.onicecandidate=event=>{if(event.candidate){socket.emit(\"ice-candidate\",{to:userId,candidate:event.candidate});}};peer.ontrack=event=>{remoteStreamsRef.current[userId]=event.streams[0];setParticipants(prev=>prev.map(p=>p.id===userId?{...p,stream:event.streams[0]}:p));};peer.oniceconnectionstatechange=()=>{if(peer.iceConnectionState===\"disconnected\"||peer.iceConnectionState===\"failed\"||peer.iceConnectionState===\"closed\"){peer.close();delete peersRef.current[userId];delete remoteStreamsRef.current[userId];setParticipants(prev=>prev.filter(p=>p.id!==userId));}};if(isInitiator&&!isOfferAnswer){peer.createOffer().then(offer=>peer.setLocalDescription(offer)).then(()=>{socket.emit(\"offer\",{to:userId,offer:peer.localDescription});});}return peer;};const toggleAudio=()=>{if(!localStream)return;localStream.getAudioTracks().forEach(track=>{track.enabled=!track.enabled;setAudioEnabled(track.enabled);});};const toggleVideo=()=>{if(!localStream)return;localStream.getVideoTracks().forEach(track=>{track.enabled=!track.enabled;setVideoEnabled(track.enabled);});};const handleScreenShare=async()=>{if(!localStream)return;if(!screenSharing){try{const screenStream=await navigator.mediaDevices.getDisplayMedia({video:true});const screenTrack=screenStream.getVideoTracks()[0];screenTrackRef.current=screenTrack;// Replace video track for all peers\nObject.values(peersRef.current).forEach(peer=>{const sender=peer.getSenders().find(s=>s.track.kind===\"video\");if(sender)sender.replaceTrack(screenTrack);});screenTrack.onended=()=>{stopScreenShare();};setScreenSharing(true);}catch(err){alert(\"Screen sharing failed: \"+err.message);}}else{stopScreenShare();}};const stopScreenShare=()=>{if(!screenTrackRef.current||!localStream)return;const videoTrack=localStream.getVideoTracks()[0];Object.values(peersRef.current).forEach(peer=>{const sender=peer.getSenders().find(s=>s.track.kind===\"video\");if(sender)sender.replaceTrack(videoTrack);});screenTrackRef.current.stop();setScreenSharing(false);};const handleEndMeeting=()=>{// Close all peers and cleanup\nObject.values(peersRef.current).forEach(peer=>peer.close());peersRef.current={};remoteStreamsRef.current={};setParticipants([]);if(localStream){localStream.getTracks().forEach(track=>track.stop());}socket.emit(\"leave-room\",{roomId});setJoined(false);};if(!joined){return/*#__PURE__*/_jsxs(\"div\",{className:\"join-container\",style:styles.joinContainer,children:[/*#__PURE__*/_jsx(\"h1\",{style:styles.logo,children:\"Ve Meet\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:\"#FFD700\"},children:\"Join a Meeting\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Room Code\",value:roomId,onChange:e=>setRoomId(e.target.value),style:styles.input}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Your Name\",value:name,onChange:e=>setName(e.target.value),style:styles.input}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setJoined(true),style:styles.button,children:\"Join\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:styles.roomContainer,children:[/*#__PURE__*/_jsxs(\"header\",{style:styles.header,children:[/*#__PURE__*/_jsx(\"h1\",{style:styles.logo,children:\"Ve Meet\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:styles.roomName,children:[\"Room: \",roomId]}),/*#__PURE__*/_jsxs(\"span\",{style:{...styles.userName,marginLeft:15},children:[\"User: \",name]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const inviteLink=`${window.location.origin}/guest?roomId=${roomId}`;navigator.clipboard.writeText(inviteLink).then(()=>alert(\"Invite link copied to clipboard!\")).catch(()=>alert(\"Failed to copy invite link\"));},style:{marginLeft:20,padding:\"6px 12px\",fontSize:14,cursor:\"pointer\",backgroundColor:\"#FFD700\",border:\"none\",borderRadius:6,fontWeight:\"bold\",color:\"black\"},title:\"Copy invite link\",children:\"Copy Invite Link\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{style:styles.videoGrid,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.videoBlock,children:[/*#__PURE__*/_jsx(\"video\",{ref:localVideoRef,autoPlay:true,muted:true,playsInline:true,style:styles.video}),/*#__PURE__*/_jsxs(\"p\",{style:styles.videoLabel,children:[\"You (\",name,\") \",audioEnabled?\"ðŸ”Š\":\"ðŸ”‡\",\" \",videoEnabled?\"ðŸŽ¥\":\"ðŸš«\"]})]}),participants.filter(p=>p.id!==socket.id).map(_ref8=>{let{id,name:pName,stream}=_ref8;return/*#__PURE__*/_jsx(VideoBlock,{name:pName,stream:stream},id);})]}),/*#__PURE__*/_jsxs(\"footer\",{style:styles.controls,children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleAudio,style:styles.controlButton,children:audioEnabled?\"Mute\":\"Unmute\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleVideo,style:styles.controlButton,children:videoEnabled?\"Stop Video\":\"Start Video\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleScreenShare,style:styles.controlButton,children:screenSharing?\"Stop Sharing\":\"Share Screen\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEndMeeting,style:styles.controlButtonEnd,children:\"End Meeting\"})]}),/*#__PURE__*/_jsxs(\"aside\",{style:styles.sidebar,children:[/*#__PURE__*/_jsxs(\"h3\",{style:{color:\"#FFD700\"},children:[\"Participants (\",participants.length,\")\"]}),/*#__PURE__*/_jsx(\"ul\",{style:styles.participantList,children:participants.map(_ref9=>{let{id,name}=_ref9;return/*#__PURE__*/_jsxs(\"li\",{style:styles.participantItem,children:[name,\" \",id===socket.id&&\"(You)\"]},id);})})]})]});};const VideoBlock=_ref0=>{let{stream,name}=_ref0;const videoRef=useRef();useEffect(()=>{if(videoRef.current&&stream){videoRef.current.srcObject=stream;}},[stream]);return/*#__PURE__*/_jsxs(\"div\",{style:styles.videoBlock,children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true,muted:false,style:styles.video}),/*#__PURE__*/_jsx(\"p\",{style:styles.videoLabel,children:name})]});};const styles={joinContainer:{backgroundColor:\"black\",color:\"#FFD700\",height:\"100vh\",display:\"flex\",flexDirection:\"column\",justifyContent:\"center\",alignItems:\"center\",gap:20},logo:{fontFamily:\"'Lucida Handwriting', cursive\",fontSize:48,color:\"#FFD700\",marginBottom:20},input:{fontSize:18,padding:\"10px 15px\",borderRadius:8,border:\"2px solid #FFD700\",backgroundColor:\"#111\",color:\"#FFD700\",width:300},button:{fontSize:20,backgroundColor:\"#FFD700\",border:\"none\",padding:\"10px 25px\",borderRadius:8,cursor:\"pointer\",fontWeight:\"bold\",color:\"black\"},roomContainer:{backgroundColor:\"black\",height:\"100vh\",display:\"grid\",gridTemplateAreas:`\n      \"header header\"\n      \"main sidebar\"\n      \"controls controls\"\n    `,gridTemplateColumns:\"1fr 300px\",gridTemplateRows:\"60px 1fr 60px\",gap:10,padding:10,color:\"#FFD700\"},header:{gridArea:\"header\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",borderBottom:\"2px solid #FFD700\",padding:\"0 20px\"},roomName:{marginRight:15,fontWeight:\"bold\"},userName:{fontStyle:\"italic\"},videoGrid:{gridArea:\"main\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, minmax(250px, 1fr))\",gap:10,overflowY:\"auto\"},videoBlock:{backgroundColor:\"#222\",borderRadius:10,overflow:\"hidden\",textAlign:\"center\",color:\"#FFD700\",boxShadow:\"0 0 10px #FFD700\"},video:{width:\"100%\",height:\"180px\",objectFit:\"cover\",borderRadius:10},videoLabel:{margin:5,fontWeight:\"bold\",fontFamily:\"'Lucida Handwriting', cursive\"},controls:{gridArea:\"controls\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",gap:20,borderTop:\"2px solid #FFD700\",padding:\"0 20px\"},controlButton:{fontSize:16,padding:\"10px 15px\",borderRadius:8,border:\"2px solid #FFD700\",backgroundColor:\"black\",color:\"#FFD700\",cursor:\"pointer\",fontWeight:\"bold\"},controlButtonEnd:{fontSize:16,padding:\"10px 15px\",borderRadius:8,border:\"2px solid red\",backgroundColor:\"red\",color:\"white\",cursor:\"pointer\",fontWeight:\"bold\"},sidebar:{gridArea:\"sidebar\",backgroundColor:\"#111\",borderRadius:8,padding:10,overflowY:\"auto\"},participantList:{listStyle:\"none\",paddingLeft:0},participantItem:{padding:\"6px 10px\",borderBottom:\"1px solid #333\",fontWeight:\"bold\"}};export default Room;","map":{"version":3,"names":["React","useEffect","useRef","useState","io","jsx","_jsx","jsxs","_jsxs","socket","secure","Room","roomId","setRoomId","name","setName","joined","setJoined","participants","setParticipants","localStream","setLocalStream","audioEnabled","setAudioEnabled","videoEnabled","setVideoEnabled","screenSharing","setScreenSharing","localVideoRef","peersRef","remoteStreamsRef","screenTrackRef","navigator","mediaDevices","getUserMedia","video","audio","then","stream","current","srcObject","emit","setupSocketListeners","catch","err","alert","message","getTracks","forEach","t","stop","Object","values","peer","close","offAny","off","on","users","_ref","id","userId","userName","createPeerConnection","prev","map","_ref2","_ref3","find","p","_ref4","from","offer","setRemoteDescription","RTCSessionDescription","answer","createAnswer","setLocalDescription","to","localDescription","_ref5","_ref6","candidate","addIceCandidate","RTCIceCandidate","e","console","error","_ref7","filter","isInitiator","isOfferAnswer","arguments","length","undefined","RTCPeerConnection","iceServers","urls","track","addTrack","onicecandidate","event","ontrack","streams","oniceconnectionstatechange","iceConnectionState","createOffer","toggleAudio","getAudioTracks","enabled","toggleVideo","getVideoTracks","handleScreenShare","screenStream","getDisplayMedia","screenTrack","sender","getSenders","s","kind","replaceTrack","onended","stopScreenShare","videoTrack","handleEndMeeting","className","style","styles","joinContainer","children","logo","color","placeholder","value","onChange","target","input","onClick","button","roomContainer","header","roomName","marginLeft","inviteLink","window","location","origin","clipboard","writeText","padding","fontSize","cursor","backgroundColor","border","borderRadius","fontWeight","title","videoGrid","videoBlock","ref","autoPlay","muted","playsInline","videoLabel","_ref8","pName","VideoBlock","controls","controlButton","controlButtonEnd","sidebar","participantList","_ref9","participantItem","_ref0","videoRef","height","display","flexDirection","justifyContent","alignItems","gap","fontFamily","marginBottom","width","gridTemplateAreas","gridTemplateColumns","gridTemplateRows","gridArea","borderBottom","marginRight","fontStyle","overflowY","overflow","textAlign","boxShadow","objectFit","margin","borderTop","listStyle","paddingLeft"],"sources":["C:/projects/Ve Meet/client/src/components/Room.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport \"./Room.css\";\r\n\r\nconst socket = io(\"https://abcdef.ngrok.io\", { secure: true });\r\n\r\nconst Room = () => {\r\n  const [roomId, setRoomId] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [joined, setJoined] = useState(false);\r\n  const [participants, setParticipants] = useState([]); // {id, name, stream}\r\n  const [localStream, setLocalStream] = useState(null);\r\n  const [audioEnabled, setAudioEnabled] = useState(true);\r\n  const [videoEnabled, setVideoEnabled] = useState(true);\r\n  const [screenSharing, setScreenSharing] = useState(false);\r\n\r\n  const localVideoRef = useRef();\r\n  const peersRef = useRef({}); // peer connections by socket id\r\n  const remoteStreamsRef = useRef({}); // remote streams by socket id\r\n  const screenTrackRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!joined) return;\r\n\r\n    // Get user media for host\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true, audio: true })\r\n      .then((stream) => {\r\n        setLocalStream(stream);\r\n        if (localVideoRef.current) {\r\n          localVideoRef.current.srcObject = stream;\r\n        }\r\n        socket.emit(\"join-room\", { roomId, name });\r\n\r\n        // Listen to socket events\r\n        setupSocketListeners(stream);\r\n      })\r\n      .catch((err) => {\r\n        alert(\"Error accessing camera/mic: \" + err.message);\r\n      });\r\n\r\n    return () => {\r\n      // Cleanup on leave\r\n      if (localStream) {\r\n        localStream.getTracks().forEach((t) => t.stop());\r\n      }\r\n      Object.values(peersRef.current).forEach((peer) => peer.close());\r\n      peersRef.current = {};\r\n      remoteStreamsRef.current = {};\r\n      setParticipants([]);\r\n      socket.offAny();\r\n      setScreenSharing(false);\r\n      screenTrackRef.current = null;\r\n    };\r\n  }, [joined]);\r\n\r\n  const setupSocketListeners = (stream) => {\r\n    socket.off(\"all-users\");\r\n    socket.off(\"user-joined\");\r\n    socket.off(\"offer\");\r\n    socket.off(\"answer\");\r\n    socket.off(\"ice-candidate\");\r\n    socket.off(\"user-left\");\r\n\r\n    // Receive all existing users in room\r\n    socket.on(\"all-users\", (users) => {\r\n      // users: [{ id, name }]\r\n      // Create peer connections to all users (guests)\r\n      users.forEach(({ id: userId, name: userName }) => {\r\n        if (userId === socket.id) return; // skip self\r\n\r\n        createPeerConnection(userId, userName, stream, true);\r\n      });\r\n\r\n      // Add self to participants list\r\n      setParticipants((prev) => [\r\n        ...prev,\r\n        { id: socket.id, name, stream },\r\n        ...users.map(({ id, name }) => ({ id, name, stream: null })),\r\n      ]);\r\n    });\r\n\r\n    // New user joined\r\n    socket.on(\"user-joined\", ({ id: userId, name: userName }) => {\r\n      // Add new user to participants list with null stream (will be updated when track arrives)\r\n      setParticipants((prev) => {\r\n        if (prev.find((p) => p.id === userId)) return prev;\r\n        return [...prev, { id: userId, name: userName, stream: null }];\r\n      });\r\n\r\n      createPeerConnection(userId, userName, stream, false);\r\n    });\r\n\r\n    // Incoming offer from guest\r\n    socket.on(\"offer\", async ({ from, offer }) => {\r\n      const peer = createPeerConnection(from, null, stream, false, true);\r\n\r\n      await peer.setRemoteDescription(new RTCSessionDescription(offer));\r\n      const answer = await peer.createAnswer();\r\n      await peer.setLocalDescription(answer);\r\n\r\n      socket.emit(\"answer\", { to: from, answer: peer.localDescription });\r\n    });\r\n\r\n    // Incoming answer from guest\r\n    socket.on(\"answer\", async ({ from, answer }) => {\r\n      const peer = peersRef.current[from];\r\n      if (!peer) return;\r\n      await peer.setRemoteDescription(new RTCSessionDescription(answer));\r\n    });\r\n\r\n    // ICE candidate from guest\r\n    socket.on(\"ice-candidate\", ({ from, candidate }) => {\r\n      const peer = peersRef.current[from];\r\n      if (!peer) return;\r\n      peer\r\n        .addIceCandidate(new RTCIceCandidate(candidate))\r\n        .catch((e) => console.error(\"Error adding ICE candidate\", e));\r\n    });\r\n\r\n    // User left\r\n    socket.on(\"user-left\", ({ id: userId }) => {\r\n      if (peersRef.current[userId]) {\r\n        peersRef.current[userId].close();\r\n        delete peersRef.current[userId];\r\n      }\r\n      if (remoteStreamsRef.current[userId]) {\r\n        delete remoteStreamsRef.current[userId];\r\n      }\r\n      setParticipants((prev) => prev.filter((p) => p.id !== userId));\r\n    });\r\n  };\r\n\r\n  const createPeerConnection = (\r\n    userId,\r\n    userName,\r\n    stream,\r\n    isInitiator,\r\n    isOfferAnswer = false\r\n  ) => {\r\n    if (peersRef.current[userId]) return peersRef.current[userId];\r\n\r\n    const peer = new RTCPeerConnection({\r\n      iceServers: [{ urls: \"stun:stun.l.google.com:19302\" }],\r\n    });\r\n\r\n    peersRef.current[userId] = peer;\r\n\r\n    // Add local tracks\r\n    if (stream) {\r\n      stream.getTracks().forEach((track) => {\r\n        peer.addTrack(track, stream);\r\n      });\r\n    }\r\n\r\n    peer.onicecandidate = (event) => {\r\n      if (event.candidate) {\r\n        socket.emit(\"ice-candidate\", { to: userId, candidate: event.candidate });\r\n      }\r\n    };\r\n\r\n    peer.ontrack = (event) => {\r\n      remoteStreamsRef.current[userId] = event.streams[0];\r\n      setParticipants((prev) =>\r\n        prev.map((p) =>\r\n          p.id === userId ? { ...p, stream: event.streams[0] } : p\r\n        )\r\n      );\r\n    };\r\n\r\n    peer.oniceconnectionstatechange = () => {\r\n      if (\r\n        peer.iceConnectionState === \"disconnected\" ||\r\n        peer.iceConnectionState === \"failed\" ||\r\n        peer.iceConnectionState === \"closed\"\r\n      ) {\r\n        peer.close();\r\n        delete peersRef.current[userId];\r\n        delete remoteStreamsRef.current[userId];\r\n        setParticipants((prev) => prev.filter((p) => p.id !== userId));\r\n      }\r\n    };\r\n\r\n    if (isInitiator && !isOfferAnswer) {\r\n      peer\r\n        .createOffer()\r\n        .then((offer) => peer.setLocalDescription(offer))\r\n        .then(() => {\r\n          socket.emit(\"offer\", { to: userId, offer: peer.localDescription });\r\n        });\r\n    }\r\n\r\n    return peer;\r\n  };\r\n\r\n  const toggleAudio = () => {\r\n    if (!localStream) return;\r\n    localStream.getAudioTracks().forEach((track) => {\r\n      track.enabled = !track.enabled;\r\n      setAudioEnabled(track.enabled);\r\n    });\r\n  };\r\n\r\n  const toggleVideo = () => {\r\n    if (!localStream) return;\r\n    localStream.getVideoTracks().forEach((track) => {\r\n      track.enabled = !track.enabled;\r\n      setVideoEnabled(track.enabled);\r\n    });\r\n  };\r\n\r\n  const handleScreenShare = async () => {\r\n    if (!localStream) return;\r\n\r\n    if (!screenSharing) {\r\n      try {\r\n        const screenStream = await navigator.mediaDevices.getDisplayMedia({\r\n          video: true,\r\n        });\r\n        const screenTrack = screenStream.getVideoTracks()[0];\r\n        screenTrackRef.current = screenTrack;\r\n\r\n        // Replace video track for all peers\r\n        Object.values(peersRef.current).forEach((peer) => {\r\n          const sender = peer\r\n            .getSenders()\r\n            .find((s) => s.track.kind === \"video\");\r\n          if (sender) sender.replaceTrack(screenTrack);\r\n        });\r\n\r\n        screenTrack.onended = () => {\r\n          stopScreenShare();\r\n        };\r\n\r\n        setScreenSharing(true);\r\n      } catch (err) {\r\n        alert(\"Screen sharing failed: \" + err.message);\r\n      }\r\n    } else {\r\n      stopScreenShare();\r\n    }\r\n  };\r\n\r\n  const stopScreenShare = () => {\r\n    if (!screenTrackRef.current || !localStream) return;\r\n    const videoTrack = localStream.getVideoTracks()[0];\r\n    Object.values(peersRef.current).forEach((peer) => {\r\n      const sender = peer.getSenders().find((s) => s.track.kind === \"video\");\r\n      if (sender) sender.replaceTrack(videoTrack);\r\n    });\r\n    screenTrackRef.current.stop();\r\n    setScreenSharing(false);\r\n  };\r\n\r\n  const handleEndMeeting = () => {\r\n    // Close all peers and cleanup\r\n    Object.values(peersRef.current).forEach((peer) => peer.close());\r\n    peersRef.current = {};\r\n    remoteStreamsRef.current = {};\r\n    setParticipants([]);\r\n    if (localStream) {\r\n      localStream.getTracks().forEach((track) => track.stop());\r\n    }\r\n    socket.emit(\"leave-room\", { roomId });\r\n    setJoined(false);\r\n  };\r\n\r\n  if (!joined) {\r\n    return (\r\n      <div className=\"join-container\" style={styles.joinContainer}>\r\n        <h1 style={styles.logo}>Ve Meet</h1>\r\n        <h2 style={{ color: \"#FFD700\" }}>Join a Meeting</h2>\r\n        <input\r\n          placeholder=\"Enter Room Code\"\r\n          value={roomId}\r\n          onChange={(e) => setRoomId(e.target.value)}\r\n          style={styles.input}\r\n        />\r\n        <input\r\n          placeholder=\"Enter Your Name\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          style={styles.input}\r\n        />\r\n        <button onClick={() => setJoined(true)} style={styles.button}>\r\n          Join\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={styles.roomContainer}>\r\n      <header style={styles.header}>\r\n  <h1 style={styles.logo}>Ve Meet</h1>\r\n  <div>\r\n    <span style={styles.roomName}>Room: {roomId}</span>\r\n    <span style={{ ...styles.userName, marginLeft: 15 }}>User: {name}</span>\r\n    <button\r\n      onClick={() => {\r\n        const inviteLink = `${window.location.origin}/guest?roomId=${roomId}`;\r\n        navigator.clipboard.writeText(inviteLink)\r\n          .then(() => alert(\"Invite link copied to clipboard!\"))\r\n          .catch(() => alert(\"Failed to copy invite link\"));\r\n      }}\r\n      style={{ \r\n        marginLeft: 20,\r\n        padding: \"6px 12px\",\r\n        fontSize: 14,\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#FFD700\",\r\n        border: \"none\",\r\n        borderRadius: 6,\r\n        fontWeight: \"bold\",\r\n        color: \"black\",\r\n      }}\r\n      title=\"Copy invite link\"\r\n    >\r\n      Copy Invite Link\r\n    </button>\r\n  </div>\r\n</header>\r\n\r\n        <main style={styles.videoGrid}>\r\n        {/* Local Video */}\r\n        <div style={styles.videoBlock}>\r\n          <video\r\n            ref={localVideoRef}\r\n            autoPlay\r\n            muted\r\n            playsInline\r\n            style={styles.video}\r\n          />\r\n          <p style={styles.videoLabel}>\r\n            You ({name}) {audioEnabled ? \"ðŸ”Š\" : \"ðŸ”‡\"} {videoEnabled ? \"ðŸŽ¥\" : \"ðŸš«\"}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Remote Videos */}\r\n        {participants\r\n          .filter((p) => p.id !== socket.id)\r\n          .map(({ id, name: pName, stream }) => (\r\n            <VideoBlock key={id} name={pName} stream={stream} />\r\n          ))}\r\n      </main>\r\n\r\n      <footer style={styles.controls}>\r\n        <button onClick={toggleAudio} style={styles.controlButton}>\r\n          {audioEnabled ? \"Mute\" : \"Unmute\"}\r\n        </button>\r\n        <button onClick={toggleVideo} style={styles.controlButton}>\r\n          {videoEnabled ? \"Stop Video\" : \"Start Video\"}\r\n        </button>\r\n        <button onClick={handleScreenShare} style={styles.controlButton}>\r\n          {screenSharing ? \"Stop Sharing\" : \"Share Screen\"}\r\n        </button>\r\n        <button onClick={handleEndMeeting} style={styles.controlButtonEnd}>\r\n          End Meeting\r\n        </button>\r\n      </footer>\r\n\r\n      <aside style={styles.sidebar}>\r\n        <h3 style={{ color: \"#FFD700\" }}>Participants ({participants.length})</h3>\r\n        <ul style={styles.participantList}>\r\n          {participants.map(({ id, name }) => (\r\n            <li key={id} style={styles.participantItem}>\r\n              {name} {id === socket.id && \"(You)\"}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </aside>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst VideoBlock = ({ stream, name }) => {\r\n  const videoRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current && stream) {\r\n      videoRef.current.srcObject = stream;\r\n    }\r\n  }, [stream]);\r\n\r\n  return (\r\n    <div style={styles.videoBlock}>\r\n      <video\r\n        ref={videoRef}\r\n        autoPlay\r\n        playsInline\r\n        muted={false}\r\n        style={styles.video}\r\n      />\r\n      <p style={styles.videoLabel}>{name}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  joinContainer: {\r\n    backgroundColor: \"black\",\r\n    color: \"#FFD700\",\r\n    height: \"100vh\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    gap: 20,\r\n  },\r\n  logo: {\r\n    fontFamily: \"'Lucida Handwriting', cursive\",\r\n    fontSize: 48,\r\n    color: \"#FFD700\",\r\n    marginBottom: 20,\r\n  },\r\n  input: {\r\n    fontSize: 18,\r\n    padding: \"10px 15px\",\r\n    borderRadius: 8,\r\n    border: \"2px solid #FFD700\",\r\n    backgroundColor: \"#111\",\r\n    color: \"#FFD700\",\r\n    width: 300,\r\n  },\r\n  button: {\r\n    fontSize: 20,\r\n    backgroundColor: \"#FFD700\",\r\n    border: \"none\",\r\n    padding: \"10px 25px\",\r\n    borderRadius: 8,\r\n    cursor: \"pointer\",\r\n    fontWeight: \"bold\",\r\n    color: \"black\",\r\n  },\r\n  roomContainer: {\r\n    backgroundColor: \"black\",\r\n    height: \"100vh\",\r\n    display: \"grid\",\r\n    gridTemplateAreas: `\r\n      \"header header\"\r\n      \"main sidebar\"\r\n      \"controls controls\"\r\n    `,\r\n    gridTemplateColumns: \"1fr 300px\",\r\n    gridTemplateRows: \"60px 1fr 60px\",\r\n    gap: 10,\r\n    padding: 10,\r\n    color: \"#FFD700\",\r\n  },\r\n  header: {\r\n    gridArea: \"header\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    borderBottom: \"2px solid #FFD700\",\r\n    padding: \"0 20px\",\r\n  },\r\n  roomName: {\r\n    marginRight: 15,\r\n    fontWeight: \"bold\",\r\n  },\r\n  userName: {\r\n    fontStyle: \"italic\",\r\n  },\r\n  videoGrid: {\r\n    gridArea: \"main\",\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(auto-fill, minmax(250px, 1fr))\",\r\n    gap: 10,\r\n    overflowY: \"auto\",\r\n  },\r\n  videoBlock: {\r\n    backgroundColor: \"#222\",\r\n    borderRadius: 10,\r\n    overflow: \"hidden\",\r\n    textAlign: \"center\",\r\n    color: \"#FFD700\",\r\n    boxShadow: \"0 0 10px #FFD700\",\r\n  },\r\n  video: {\r\n    width: \"100%\",\r\n    height: \"180px\",\r\n    objectFit: \"cover\",\r\n    borderRadius: 10,\r\n  },\r\n  videoLabel: {\r\n    margin: 5,\r\n    fontWeight: \"bold\",\r\n    fontFamily: \"'Lucida Handwriting', cursive\",\r\n  },\r\n  controls: {\r\n    gridArea: \"controls\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    gap: 20,\r\n    borderTop: \"2px solid #FFD700\",\r\n    padding: \"0 20px\",\r\n  },\r\n  controlButton: {\r\n    fontSize: 16,\r\n    padding: \"10px 15px\",\r\n    borderRadius: 8,\r\n    border: \"2px solid #FFD700\",\r\n    backgroundColor: \"black\",\r\n    color: \"#FFD700\",\r\n    cursor: \"pointer\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  controlButtonEnd: {\r\n    fontSize: 16,\r\n    padding: \"10px 15px\",\r\n    borderRadius: 8,\r\n    border: \"2px solid red\",\r\n    backgroundColor: \"red\",\r\n    color: \"white\",\r\n    cursor: \"pointer\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  sidebar: {\r\n    gridArea: \"sidebar\",\r\n    backgroundColor: \"#111\",\r\n    borderRadius: 8,\r\n    padding: 10,\r\n    overflowY: \"auto\",\r\n  },\r\n  participantList: {\r\n    listStyle: \"none\",\r\n    paddingLeft: 0,\r\n  },\r\n  participantItem: {\r\n    padding: \"6px 10px\",\r\n    borderBottom: \"1px solid #333\",\r\n    fontWeight: \"bold\",\r\n  },\r\n};\r\n\r\nexport default Room;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}