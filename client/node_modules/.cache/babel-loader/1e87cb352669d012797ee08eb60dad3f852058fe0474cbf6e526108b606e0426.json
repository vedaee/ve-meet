{"ast":null,"code":"var _jsxFileName = \"C:\\\\projects\\\\Ve Meet\\\\client\\\\src\\\\components\\\\Room.js\",\n  _s = $RefreshSig$();\n// Room.js\nimport React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io.connect(\"http://localhost:5000\");\nconst Room = () => {\n  _s();\n  const {\n    roomId\n  } = useParams();\n  const localVideoRef = useRef(null);\n  const peerVideoRef = useRef(new Map());\n  const [peers, setPeers] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [cameraDevices, setCameraDevices] = useState([]);\n  const [selectedCamera, setSelectedCamera] = useState(\"\");\n  useEffect(() => {\n    navigator.mediaDevices.enumerateDevices().then(devices => {\n      const videoDevices = devices.filter(device => device.kind === \"videoinput\");\n      setCameraDevices(videoDevices);\n      if (videoDevices[0]) {\n        setSelectedCamera(videoDevices[0].deviceId);\n      }\n    });\n  }, []);\n  useEffect(() => {\n    if (selectedCamera) {\n      navigator.mediaDevices.getUserMedia({\n        video: {\n          deviceId: selectedCamera\n        },\n        audio: true\n      }).then(stream => {\n        if (localVideoRef.current) {\n          localVideoRef.current.srcObject = stream;\n        }\n        socket.emit(\"join-room\", {\n          roomId,\n          name\n        });\n      });\n    }\n  }, [selectedCamera, name]);\n  useEffect(() => {\n    socket.on(\"all-users\", users => {\n      setPeers(users);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold\",\n      children: [\"Room ID: \", roomId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), !name && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter your name\",\n        onChange: e => setName(e.target.value),\n        className: \"border p-2 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), name && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex gap-4 items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: localVideoRef,\n        autoPlay: true,\n        muted: true,\n        playsInline: true,\n        className: \"w-48 h-36 rounded-md shadow-lg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedCamera,\n        onChange: e => setSelectedCamera(e.target.value),\n        className: \"p-2 border rounded\",\n        children: cameraDevices.map(device => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: device.deviceId,\n          children: device.label\n        }, device.deviceId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-600\",\n        children: [\"You are: \", name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 grid grid-cols-2 gap-4\",\n      children: peers.map(peerID => /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: ref => {\n          if (ref) peerVideoRef.current.set(peerID, ref);\n        },\n        autoPlay: true,\n        playsInline: true,\n        className: \"w-48 h-36 rounded-md shadow-lg\"\n      }, peerID, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(Room, \"FU+fVVOBx2k1W32f/pIINJSyayE=\", false, function () {\n  return [useParams];\n});\n_c = Room;\nexport default Room;\nvar _c;\n$RefreshReg$(_c, \"Room\");","map":{"version":3,"names":["React","useEffect","useRef","useState","io","useParams","jsxDEV","_jsxDEV","socket","connect","Room","_s","roomId","localVideoRef","peerVideoRef","Map","peers","setPeers","name","setName","cameraDevices","setCameraDevices","selectedCamera","setSelectedCamera","navigator","mediaDevices","enumerateDevices","then","devices","videoDevices","filter","device","kind","deviceId","getUserMedia","video","audio","stream","current","srcObject","emit","on","users","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","e","target","value","ref","autoPlay","muted","playsInline","map","label","peerID","set","_c","$RefreshReg$"],"sources":["C:/projects/Ve Meet/client/src/components/Room.js"],"sourcesContent":["// Room.js\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst socket = io.connect(\"http://localhost:5000\");\r\n\r\nconst Room = () => {\r\n  const { roomId } = useParams();\r\n  const localVideoRef = useRef(null);\r\n  const peerVideoRef = useRef(new Map());\r\n  const [peers, setPeers] = useState([]);\r\n  const [name, setName] = useState(\"\");\r\n  const [cameraDevices, setCameraDevices] = useState([]);\r\n  const [selectedCamera, setSelectedCamera] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    navigator.mediaDevices.enumerateDevices().then((devices) => {\r\n      const videoDevices = devices.filter((device) => device.kind === \"videoinput\");\r\n      setCameraDevices(videoDevices);\r\n      if (videoDevices[0]) {\r\n        setSelectedCamera(videoDevices[0].deviceId);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedCamera) {\r\n      navigator.mediaDevices.getUserMedia({ video: { deviceId: selectedCamera }, audio: true })\r\n        .then((stream) => {\r\n          if (localVideoRef.current) {\r\n            localVideoRef.current.srcObject = stream;\r\n          }\r\n          socket.emit(\"join-room\", { roomId, name });\r\n        });\r\n    }\r\n  }, [selectedCamera, name]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"all-users\", (users) => {\r\n      setPeers(users);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h2 className=\"text-xl font-bold\">Room ID: {roomId}</h2>\r\n\r\n      {!name && (\r\n        <div className=\"mt-4\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Enter your name\"\r\n            onChange={(e) => setName(e.target.value)}\r\n            className=\"border p-2 rounded\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {name && (\r\n        <div className=\"mt-4 flex gap-4 items-center\">\r\n          <video ref={localVideoRef} autoPlay muted playsInline className=\"w-48 h-36 rounded-md shadow-lg\" />\r\n\r\n          <select\r\n            value={selectedCamera}\r\n            onChange={(e) => setSelectedCamera(e.target.value)}\r\n            className=\"p-2 border rounded\"\r\n          >\r\n            {cameraDevices.map((device) => (\r\n              <option key={device.deviceId} value={device.deviceId}>{device.label}</option>\r\n            ))}\r\n          </select>\r\n\r\n          <div className=\"text-sm text-gray-600\">You are: {name}</div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"mt-6 grid grid-cols-2 gap-4\">\r\n        {peers.map((peerID) => (\r\n          <video\r\n            key={peerID}\r\n            ref={(ref) => {\r\n              if (ref) peerVideoRef.current.set(peerID, ref);\r\n            }}\r\n            autoPlay\r\n            playsInline\r\n            className=\"w-48 h-36 rounded-md shadow-lg\"\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}