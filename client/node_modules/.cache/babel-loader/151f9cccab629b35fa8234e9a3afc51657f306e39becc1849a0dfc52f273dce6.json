{"ast":null,"code":"var _jsxFileName = \"C:\\\\projects\\\\Ve Meet\\\\client\\\\src\\\\components\\\\Room.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SERVER_URL = \"http://localhost:5000\"; // Change if your server URL is different\n\nconst VeMeetRoom = () => {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const [roomId, setRoomId] = useState(\"\");\n  const [userName, setUserName] = useState(\"\");\n  const [joined, setJoined] = useState(false);\n  const [localStream, setLocalStream] = useState(null);\n  const [remoteStreams, setRemoteStreams] = useState({});\n  const [peers, setPeers] = useState({});\n  const [availableCameras, setAvailableCameras] = useState([]);\n  const [availableMicrophones, setAvailableMicrophones] = useState([]);\n  const [selectedCamera, setSelectedCamera] = useState(\"\");\n  const [selectedMicrophone, setSelectedMicrophone] = useState(\"\");\n  const [muted, setMuted] = useState(false);\n  const [videoOff, setVideoOff] = useState(false);\n  const [screenSharing, setScreenSharing] = useState(false);\n  const localVideoRef = useRef();\n  const peersRef = useRef({});\n  const localStreamRef = useRef();\n  const screenShareStreamRef = useRef();\n\n  // Get media devices and initialize local stream\n  useEffect(() => {\n    async function getMediaDevices() {\n      try {\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        const cameras = devices.filter(device => device.kind === \"videoinput\");\n        const microphones = devices.filter(device => device.kind === \"audioinput\");\n        setAvailableCameras(cameras);\n        setAvailableMicrophones(microphones);\n        if (cameras.length > 0) setSelectedCamera(cameras[0].deviceId);\n        if (microphones.length > 0) setSelectedMicrophone(microphones[0].deviceId);\n      } catch (e) {\n        console.error(\"Error getting media devices\", e);\n      }\n    }\n    getMediaDevices();\n  }, []);\n\n  // When camera or mic selection changes, update local stream\n  useEffect(() => {\n    if (!selectedCamera || !selectedMicrophone) return;\n    async function getStream() {\n      if (localStreamRef.current) {\n        localStreamRef.current.getTracks().forEach(track => track.stop());\n      }\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: {\n            deviceId: selectedCamera ? {\n              exact: selectedCamera\n            } : undefined\n          },\n          audio: {\n            deviceId: selectedMicrophone ? {\n              exact: selectedMicrophone\n            } : undefined\n          }\n        });\n        setLocalStream(stream);\n        localStreamRef.current = stream;\n        if (localVideoRef.current) {\n          localVideoRef.current.srcObject = stream;\n        }\n        // Update all peers with new tracks\n        Object.values(peersRef.current).forEach(peer => {\n          // Remove old tracks\n          peer.getSenders().forEach(sender => {\n            if (sender.track.kind === \"video\" && selectedCamera) {\n              peer.removeTrack(sender);\n            }\n            if (sender.track.kind === \"audio\" && selectedMicrophone) {\n              peer.removeTrack(sender);\n            }\n          });\n          // Add new tracks\n          stream.getTracks().forEach(track => {\n            peer.addTrack(track, stream);\n          });\n        });\n      } catch (e) {\n        console.error(\"Error getting user media\", e);\n      }\n    }\n    getStream();\n  }, [selectedCamera, selectedMicrophone]);\n\n  // Initialize socket connection\n  useEffect(() => {\n    const s = io(SERVER_URL);\n    setSocket(s);\n    s.on(\"connect\", () => {\n      console.log(\"Connected to signaling server\");\n    });\n    s.on(\"all-users\", users => {\n      users.forEach(userId => {\n        if (userId === s.id) return;\n        callUser(userId);\n      });\n    });\n    s.on(\"offer\", async payload => {\n      const peer = createPeer(payload.caller, s.id);\n      peersRef.current[payload.caller] = peer;\n      if (localStreamRef.current) {\n        localStreamRef.current.getTracks().forEach(track => {\n          peer.addTrack(track, localStreamRef.current);\n        });\n      }\n      await peer.setRemoteDescription(new RTCSessionDescription(payload.sdp));\n      const answer = await peer.createAnswer();\n      await peer.setLocalDescription(answer);\n      s.emit(\"answer\", {\n        target: payload.caller,\n        caller: s.id,\n        sdp: peer.localDescription\n      });\n    });\n    s.on(\"answer\", async payload => {\n      const peer = peersRef.current[payload.caller];\n      if (!peer) return;\n      await peer.setRemoteDescription(new RTCSessionDescription(payload.sdp));\n    });\n    s.on(\"ice-candidate\", async incoming => {\n      const peer = peersRef.current[incoming.sender];\n      if (peer) {\n        try {\n          await peer.addIceCandidate(new RTCIceCandidate(incoming.candidate));\n        } catch (e) {\n          console.error(\"Error adding received ice candidate\", e);\n        }\n      }\n    });\n    s.on(\"user-disconnected\", userId => {\n      if (peersRef.current[userId]) {\n        peersRef.current[userId].close();\n        delete peersRef.current[userId];\n        setRemoteStreams(streams => {\n          const newStreams = {\n            ...streams\n          };\n          delete newStreams[userId];\n          return newStreams;\n        });\n      }\n    });\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n\n  // Peer connection creation for calling a new user\n  function createPeer(userToCall, callerId) {\n    const peer = new RTCPeerConnection({\n      iceServers: [{\n        urls: \"stun:stun.l.google.com:19302\"\n      }\n      // Add TURN servers if needed\n      ]\n    });\n    peer.onicecandidate = event => {\n      if (event.candidate) {\n        socket.emit(\"ice-candidate\", {\n          target: userToCall,\n          sender: callerId,\n          candidate: event.candidate\n        });\n      }\n    };\n    peer.ontrack = event => {\n      setRemoteStreams(prevStreams => {\n        return {\n          ...prevStreams,\n          [userToCall]: event.streams[0]\n        };\n      });\n    };\n    return peer;\n  }\n\n  // Call a user by creating offer\n  async function callUser(userId) {\n    if (!socket) return;\n    const peer = createPeer(userId, socket.id);\n    peersRef.current[userId] = peer;\n    if (localStreamRef.current) {\n      localStreamRef.current.getTracks().forEach(track => {\n        peer.addTrack(track, localStreamRef.current);\n      });\n    }\n    const offer = await peer.createOffer();\n    await peer.setLocalDescription(offer);\n    socket.emit(\"offer\", {\n      target: userId,\n      caller: socket.id,\n      sdp: peer.localDescription\n    });\n  }\n\n  // Join room handler\n  function joinRoom() {\n    if (!roomId.trim() || !userName.trim()) {\n      alert(\"Please enter room code and your name.\");\n      return;\n    }\n    setJoined(true);\n    socket.emit(\"join-room\", {\n      roomId,\n      userName\n    });\n  }\n\n  // Mute/unmute audio\n  function toggleMute() {\n    if (!localStreamRef.current) return;\n    localStreamRef.current.getAudioTracks().forEach(track => {\n      track.enabled = !track.enabled;\n    });\n    setMuted(!muted);\n  }\n\n  // Video on/off\n  function toggleVideo() {\n    if (!localStreamRef.current) return;\n    localStreamRef.current.getVideoTracks().forEach(track => {\n      track.enabled = !track.enabled;\n    });\n    setVideoOff(!videoOff);\n  }\n\n  // Start or stop screen sharing\n  async function toggleScreenShare() {\n    if (!screenSharing) {\n      try {\n        const screenStream = await navigator.mediaDevices.getDisplayMedia();\n        screenShareStreamRef.current = screenStream;\n\n        // Replace video tracks in all peer connections\n        Object.values(peersRef.current).forEach(peer => {\n          const sender = peer.getSenders().find(s => s.track.kind === \"video\");\n          if (sender) {\n            sender.replaceTrack(screenStream.getVideoTracks()[0]);\n          }\n        });\n\n        // Replace local video stream with screen share\n        if (localVideoRef.current) {\n          localVideoRef.current.srcObject = screenStream;\n        }\n        setScreenSharing(true);\n        screenStream.getVideoTracks()[0].onended = () => {\n          stopScreenShare();\n        };\n      } catch (e) {\n        console.error(\"Failed to share screen\", e);\n      }\n    } else {\n      stopScreenShare();\n    }\n  }\n\n  // Stop screen sharing and revert back to camera video\n  function stopScreenShare() {\n    if (!screenShareStreamRef.current) return;\n    screenShareStreamRef.current.getTracks().forEach(track => track.stop());\n    screenShareStreamRef.current = null;\n\n    // Replace video track in all peers with camera video track\n    Object.values(peersRef.current).forEach(peer => {\n      const sender = peer.getSenders().find(s => s.track.kind === \"video\");\n      if (sender && localStreamRef.current) {\n        sender.replaceTrack(localStreamRef.current.getVideoTracks()[0]);\n      }\n    });\n    if (localVideoRef.current) {\n      localVideoRef.current.srcObject = localStreamRef.current;\n    }\n    setScreenSharing(false);\n  }\n\n  // End meeting: close all connections and reset state\n  function endMeeting() {\n    Object.values(peersRef.current).forEach(peer => peer.close());\n    peersRef.current = {};\n    if (localStreamRef.current) {\n      localStreamRef.current.getTracks().forEach(track => track.stop());\n      localStreamRef.current = null;\n    }\n    setRemoteStreams({});\n    setPeers({});\n    setJoined(false);\n    setRoomId(\"\");\n    setUserName(\"\");\n    if (localVideoRef.current) {\n      localVideoRef.current.srcObject = null;\n    }\n    if (socket) socket.emit(\"leave-room\");\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: !joined ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.joinContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Ve Meet - Join or Create Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: styles.input,\n        type: \"text\",\n        placeholder: \"Enter Room Code\",\n        value: roomId,\n        onChange: e => setRoomId(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: styles.input,\n        type: \"text\",\n        placeholder: \"Enter Your Name\",\n        value: userName,\n        onChange: e => setUserName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: styles.joinBtn,\n        onClick: joinRoom,\n        children: \"Join / Create Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 10,\n          fontSize: 12,\n          color: \"#666\"\n        },\n        children: \"Room code is case-sensitive.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.topBar,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Room:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this), \" \", roomId, \" | \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"You:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 49\n          }, this), \" \", userName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.controlBtn,\n            onClick: toggleMute,\n            children: muted ? \"Unmute\" : \"Mute\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.controlBtn,\n            onClick: toggleVideo,\n            children: videoOff ? \"Start Video\" : \"Stop Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: styles.controlBtn,\n            onClick: toggleScreenShare,\n            children: screenSharing ? \"Stop Share\" : \"Share Screen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              ...styles.controlBtn,\n              backgroundColor: \"#e74c3c\"\n            },\n            onClick: endMeeting,\n            children: \"End Meeting\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.main,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.localVideoContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: \"bold\",\n              marginBottom: 6\n            },\n            children: [\"You (\", userName, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: localVideoRef,\n            autoPlay: true,\n            muted: true,\n            playsInline: true,\n            style: styles.localVideo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 10\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Camera:\", \" \", /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedCamera,\n                onChange: e => setSelectedCamera(e.target.value),\n                children: availableCameras.map(cam => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: cam.deviceId,\n                  children: cam.label || \"Camera \" + cam.deviceId\n                }, cam.deviceId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Microphone:\", \" \", /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedMicrophone,\n                onChange: e => setSelectedMicrophone(e.target.value),\n                children: availableMicrophones.map(mic => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: mic.deviceId,\n                  children: mic.label || \"Microphone \" + mic.deviceId\n                }, mic.deviceId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.remoteVideosContainer,\n          children: [Object.entries(remoteStreams).map(([peerId, stream]) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.remoteVideoWrapper,\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              autoPlay: true,\n              playsInline: true,\n              ref: video => {\n                if (video && stream) {\n                  video.srcObject = stream;\n                }\n              },\n              style: styles.remoteVideo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.participantName,\n              children: \"Participant\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 19\n            }, this)]\n          }, peerId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 17\n          }, this)), Object.keys(remoteStreams).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#888\",\n              marginTop: 30\n            },\n            children: \"No participants yet...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.participantList,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Participants\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            style: {\n              listStyle: \"none\",\n              paddingLeft: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              style: styles.participantListItem,\n              children: [userName, \" (You)\"]\n            }, \"self\", true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 17\n            }, this), Object.keys(peersRef.current).map(peerId => /*#__PURE__*/_jsxDEV(\"li\", {\n              style: styles.participantListItem,\n              children: peerId\n            }, peerId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 5\n  }, this);\n};\n_s(VeMeetRoom, \"4mzImqa6qJDwqq1fDSsrNBnScfQ=\");\n_c = VeMeetRoom;\nconst styles = {\n  container: {\n    fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\n    maxWidth: 1200,\n    margin: \"0 auto\",\n    padding: 20\n  },\n  joinContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    maxWidth: 400,\n    margin: \"50px auto\",\n    border: \"1px solid #ddd\",\n    padding: 20,\n    borderRadius: 6,\n    backgroundColor: \"#f9f9f9\",\n    boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\"\n  },\n  input: {\n    padding: \"10px 12px\",\n    marginBottom: 10,\n    fontSize: 16,\n    borderRadius: 4,\n    border: \"1px solid #ccc\"\n  },\n  joinBtn: {\n    padding: \"12px 16px\",\n    fontSize: 16,\n    cursor: \"pointer\",\n    backgroundColor: \"#0066ff\",\n    color: \"white\",\n    border: \"none\",\n    borderRadius: 4\n  },\n  topBar: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: 15,\n    alignItems: \"center\"\n  },\n  controlBtn: {\n    marginLeft: 8,\n    padding: \"8px 14px\",\n    fontSize: 14,\n    cursor: \"pointer\",\n    backgroundColor: \"#007bff\",\n    border: \"none\",\n    borderRadius: 4,\n    color: \"white\"\n  },\n  main: {\n    display: \"flex\",\n    gap: 16,\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\"\n  },\n  localVideoContainer: {\n    flex: \"1 1 300px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    border: \"1px solid #ddd\",\n    padding: 10,\n    borderRadius: 6,\n    backgroundColor: \"#fafafa\"\n  },\n  localVideo: {\n    width: \"100%\",\n    maxWidth: 320,\n    borderRadius: 6,\n    backgroundColor: \"black\"\n  },\n  remoteVideosContainer: {\n    flex: \"3 1 600px\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    gap: 12,\n    maxHeight: \"70vh\",\n    overflowY: \"auto\",\n    border: \"1px solid #ddd\",\n    padding: 10,\n    borderRadius: 6,\n    backgroundColor: \"#fafafa\"\n  },\n  remoteVideoWrapper: {\n    flex: \"1 1 280px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    marginBottom: 12\n  },\n  remoteVideo: {\n    width: \"100%\",\n    borderRadius: 6,\n    backgroundColor: \"black\"\n  },\n  participantName: {\n    marginTop: 6,\n    fontWeight: \"bold\",\n    color: \"#444\"\n  },\n  participantList: {\n    flex: \"1 1 200px\",\n    borderLeft: \"1px solid #ddd\",\n    paddingLeft: 12,\n    maxHeight: \"70vh\",\n    overflowY: \"auto\"\n  },\n  participantListItem: {\n    padding: \"6px 0\",\n    borderBottom: \"1px solid #eee\"\n  }\n};\nexport default VeMeetRoom;\nvar _c;\n$RefreshReg$(_c, \"VeMeetRoom\");","map":{"version":3,"names":["React","useEffect","useRef","useState","io","jsxDEV","_jsxDEV","Fragment","_Fragment","SERVER_URL","VeMeetRoom","_s","socket","setSocket","roomId","setRoomId","userName","setUserName","joined","setJoined","localStream","setLocalStream","remoteStreams","setRemoteStreams","peers","setPeers","availableCameras","setAvailableCameras","availableMicrophones","setAvailableMicrophones","selectedCamera","setSelectedCamera","selectedMicrophone","setSelectedMicrophone","muted","setMuted","videoOff","setVideoOff","screenSharing","setScreenSharing","localVideoRef","peersRef","localStreamRef","screenShareStreamRef","getMediaDevices","devices","navigator","mediaDevices","enumerateDevices","cameras","filter","device","kind","microphones","length","deviceId","e","console","error","getStream","current","getTracks","forEach","track","stop","stream","getUserMedia","video","exact","undefined","audio","srcObject","Object","values","peer","getSenders","sender","removeTrack","addTrack","s","on","log","users","userId","id","callUser","payload","createPeer","caller","setRemoteDescription","RTCSessionDescription","sdp","answer","createAnswer","setLocalDescription","emit","target","localDescription","incoming","addIceCandidate","RTCIceCandidate","candidate","close","streams","newStreams","disconnect","userToCall","callerId","RTCPeerConnection","iceServers","urls","onicecandidate","event","ontrack","prevStreams","offer","createOffer","joinRoom","trim","alert","toggleMute","getAudioTracks","enabled","toggleVideo","getVideoTracks","toggleScreenShare","screenStream","getDisplayMedia","find","replaceTrack","onended","stopScreenShare","endMeeting","style","styles","container","children","joinContainer","fileName","_jsxFileName","lineNumber","columnNumber","input","type","placeholder","value","onChange","joinBtn","onClick","marginTop","fontSize","color","topBar","controlBtn","backgroundColor","main","localVideoContainer","fontWeight","marginBottom","ref","autoPlay","playsInline","localVideo","map","cam","label","mic","remoteVideosContainer","entries","peerId","remoteVideoWrapper","remoteVideo","participantName","keys","participantList","listStyle","paddingLeft","participantListItem","_c","fontFamily","maxWidth","margin","padding","display","flexDirection","border","borderRadius","boxShadow","cursor","justifyContent","alignItems","marginLeft","gap","flexWrap","flex","width","maxHeight","overflowY","borderLeft","borderBottom","$RefreshReg$"],"sources":["C:/projects/Ve Meet/client/src/components/Room.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\n\r\nconst SERVER_URL = \"http://localhost:5000\"; // Change if your server URL is different\r\n\r\nconst VeMeetRoom = () => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [roomId, setRoomId] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [joined, setJoined] = useState(false);\r\n\r\n  const [localStream, setLocalStream] = useState(null);\r\n  const [remoteStreams, setRemoteStreams] = useState({});\r\n  const [peers, setPeers] = useState({});\r\n\r\n  const [availableCameras, setAvailableCameras] = useState([]);\r\n  const [availableMicrophones, setAvailableMicrophones] = useState([]);\r\n\r\n  const [selectedCamera, setSelectedCamera] = useState(\"\");\r\n  const [selectedMicrophone, setSelectedMicrophone] = useState(\"\");\r\n\r\n  const [muted, setMuted] = useState(false);\r\n  const [videoOff, setVideoOff] = useState(false);\r\n  const [screenSharing, setScreenSharing] = useState(false);\r\n\r\n  const localVideoRef = useRef();\r\n  const peersRef = useRef({});\r\n  const localStreamRef = useRef();\r\n  const screenShareStreamRef = useRef();\r\n\r\n  // Get media devices and initialize local stream\r\n  useEffect(() => {\r\n    async function getMediaDevices() {\r\n      try {\r\n        const devices = await navigator.mediaDevices.enumerateDevices();\r\n        const cameras = devices.filter(\r\n          (device) => device.kind === \"videoinput\"\r\n        );\r\n        const microphones = devices.filter(\r\n          (device) => device.kind === \"audioinput\"\r\n        );\r\n        setAvailableCameras(cameras);\r\n        setAvailableMicrophones(microphones);\r\n\r\n        if (cameras.length > 0) setSelectedCamera(cameras[0].deviceId);\r\n        if (microphones.length > 0) setSelectedMicrophone(microphones[0].deviceId);\r\n      } catch (e) {\r\n        console.error(\"Error getting media devices\", e);\r\n      }\r\n    }\r\n    getMediaDevices();\r\n  }, []);\r\n\r\n  // When camera or mic selection changes, update local stream\r\n  useEffect(() => {\r\n    if (!selectedCamera || !selectedMicrophone) return;\r\n\r\n    async function getStream() {\r\n      if (localStreamRef.current) {\r\n        localStreamRef.current.getTracks().forEach((track) => track.stop());\r\n      }\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia({\r\n          video: { deviceId: selectedCamera ? { exact: selectedCamera } : undefined },\r\n          audio: { deviceId: selectedMicrophone ? { exact: selectedMicrophone } : undefined },\r\n        });\r\n        setLocalStream(stream);\r\n        localStreamRef.current = stream;\r\n        if (localVideoRef.current) {\r\n          localVideoRef.current.srcObject = stream;\r\n        }\r\n        // Update all peers with new tracks\r\n        Object.values(peersRef.current).forEach((peer) => {\r\n          // Remove old tracks\r\n          peer.getSenders().forEach((sender) => {\r\n            if (\r\n              sender.track.kind === \"video\" &&\r\n              selectedCamera\r\n            ) {\r\n              peer.removeTrack(sender);\r\n            }\r\n            if (\r\n              sender.track.kind === \"audio\" &&\r\n              selectedMicrophone\r\n            ) {\r\n              peer.removeTrack(sender);\r\n            }\r\n          });\r\n          // Add new tracks\r\n          stream.getTracks().forEach((track) => {\r\n            peer.addTrack(track, stream);\r\n          });\r\n        });\r\n      } catch (e) {\r\n        console.error(\"Error getting user media\", e);\r\n      }\r\n    }\r\n    getStream();\r\n  }, [selectedCamera, selectedMicrophone]);\r\n\r\n  // Initialize socket connection\r\n  useEffect(() => {\r\n    const s = io(SERVER_URL);\r\n    setSocket(s);\r\n\r\n    s.on(\"connect\", () => {\r\n      console.log(\"Connected to signaling server\");\r\n    });\r\n\r\n    s.on(\"all-users\", (users) => {\r\n      users.forEach((userId) => {\r\n        if (userId === s.id) return;\r\n        callUser(userId);\r\n      });\r\n    });\r\n\r\n    s.on(\"offer\", async (payload) => {\r\n      const peer = createPeer(payload.caller, s.id);\r\n      peersRef.current[payload.caller] = peer;\r\n\r\n      if (localStreamRef.current) {\r\n        localStreamRef.current.getTracks().forEach((track) => {\r\n          peer.addTrack(track, localStreamRef.current);\r\n        });\r\n      }\r\n\r\n      await peer.setRemoteDescription(new RTCSessionDescription(payload.sdp));\r\n      const answer = await peer.createAnswer();\r\n      await peer.setLocalDescription(answer);\r\n\r\n      s.emit(\"answer\", {\r\n        target: payload.caller,\r\n        caller: s.id,\r\n        sdp: peer.localDescription,\r\n      });\r\n    });\r\n\r\n    s.on(\"answer\", async (payload) => {\r\n      const peer = peersRef.current[payload.caller];\r\n      if (!peer) return;\r\n      await peer.setRemoteDescription(new RTCSessionDescription(payload.sdp));\r\n    });\r\n\r\n    s.on(\"ice-candidate\", async (incoming) => {\r\n      const peer = peersRef.current[incoming.sender];\r\n      if (peer) {\r\n        try {\r\n          await peer.addIceCandidate(new RTCIceCandidate(incoming.candidate));\r\n        } catch (e) {\r\n          console.error(\"Error adding received ice candidate\", e);\r\n        }\r\n      }\r\n    });\r\n\r\n    s.on(\"user-disconnected\", (userId) => {\r\n      if (peersRef.current[userId]) {\r\n        peersRef.current[userId].close();\r\n        delete peersRef.current[userId];\r\n\r\n        setRemoteStreams((streams) => {\r\n          const newStreams = { ...streams };\r\n          delete newStreams[userId];\r\n          return newStreams;\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      s.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  // Peer connection creation for calling a new user\r\n  function createPeer(userToCall, callerId) {\r\n    const peer = new RTCPeerConnection({\r\n      iceServers: [\r\n        { urls: \"stun:stun.l.google.com:19302\" },\r\n        // Add TURN servers if needed\r\n      ],\r\n    });\r\n\r\n    peer.onicecandidate = (event) => {\r\n      if (event.candidate) {\r\n        socket.emit(\"ice-candidate\", {\r\n          target: userToCall,\r\n          sender: callerId,\r\n          candidate: event.candidate,\r\n        });\r\n      }\r\n    };\r\n\r\n    peer.ontrack = (event) => {\r\n      setRemoteStreams((prevStreams) => {\r\n        return { ...prevStreams, [userToCall]: event.streams[0] };\r\n      });\r\n    };\r\n\r\n    return peer;\r\n  }\r\n\r\n  // Call a user by creating offer\r\n  async function callUser(userId) {\r\n    if (!socket) return;\r\n    const peer = createPeer(userId, socket.id);\r\n    peersRef.current[userId] = peer;\r\n\r\n    if (localStreamRef.current) {\r\n      localStreamRef.current.getTracks().forEach((track) => {\r\n        peer.addTrack(track, localStreamRef.current);\r\n      });\r\n    }\r\n\r\n    const offer = await peer.createOffer();\r\n    await peer.setLocalDescription(offer);\r\n\r\n    socket.emit(\"offer\", {\r\n      target: userId,\r\n      caller: socket.id,\r\n      sdp: peer.localDescription,\r\n    });\r\n  }\r\n\r\n  // Join room handler\r\n  function joinRoom() {\r\n    if (!roomId.trim() || !userName.trim()) {\r\n      alert(\"Please enter room code and your name.\");\r\n      return;\r\n    }\r\n    setJoined(true);\r\n    socket.emit(\"join-room\", { roomId, userName });\r\n  }\r\n\r\n  // Mute/unmute audio\r\n  function toggleMute() {\r\n    if (!localStreamRef.current) return;\r\n    localStreamRef.current.getAudioTracks().forEach((track) => {\r\n      track.enabled = !track.enabled;\r\n    });\r\n    setMuted(!muted);\r\n  }\r\n\r\n  // Video on/off\r\n  function toggleVideo() {\r\n    if (!localStreamRef.current) return;\r\n    localStreamRef.current.getVideoTracks().forEach((track) => {\r\n      track.enabled = !track.enabled;\r\n    });\r\n    setVideoOff(!videoOff);\r\n  }\r\n\r\n  // Start or stop screen sharing\r\n  async function toggleScreenShare() {\r\n    if (!screenSharing) {\r\n      try {\r\n        const screenStream = await navigator.mediaDevices.getDisplayMedia();\r\n        screenShareStreamRef.current = screenStream;\r\n\r\n        // Replace video tracks in all peer connections\r\n        Object.values(peersRef.current).forEach((peer) => {\r\n          const sender = peer\r\n            .getSenders()\r\n            .find((s) => s.track.kind === \"video\");\r\n          if (sender) {\r\n            sender.replaceTrack(screenStream.getVideoTracks()[0]);\r\n          }\r\n        });\r\n\r\n        // Replace local video stream with screen share\r\n        if (localVideoRef.current) {\r\n          localVideoRef.current.srcObject = screenStream;\r\n        }\r\n        setScreenSharing(true);\r\n\r\n        screenStream.getVideoTracks()[0].onended = () => {\r\n          stopScreenShare();\r\n        };\r\n      } catch (e) {\r\n        console.error(\"Failed to share screen\", e);\r\n      }\r\n    } else {\r\n      stopScreenShare();\r\n    }\r\n  }\r\n\r\n  // Stop screen sharing and revert back to camera video\r\n  function stopScreenShare() {\r\n    if (!screenShareStreamRef.current) return;\r\n\r\n    screenShareStreamRef.current.getTracks().forEach((track) => track.stop());\r\n    screenShareStreamRef.current = null;\r\n\r\n    // Replace video track in all peers with camera video track\r\n    Object.values(peersRef.current).forEach((peer) => {\r\n      const sender = peer.getSenders().find((s) => s.track.kind === \"video\");\r\n      if (sender && localStreamRef.current) {\r\n        sender.replaceTrack(localStreamRef.current.getVideoTracks()[0]);\r\n      }\r\n    });\r\n\r\n    if (localVideoRef.current) {\r\n      localVideoRef.current.srcObject = localStreamRef.current;\r\n    }\r\n    setScreenSharing(false);\r\n  }\r\n\r\n  // End meeting: close all connections and reset state\r\n  function endMeeting() {\r\n    Object.values(peersRef.current).forEach((peer) => peer.close());\r\n    peersRef.current = {};\r\n    if (localStreamRef.current) {\r\n      localStreamRef.current.getTracks().forEach((track) => track.stop());\r\n      localStreamRef.current = null;\r\n    }\r\n    setRemoteStreams({});\r\n    setPeers({});\r\n    setJoined(false);\r\n    setRoomId(\"\");\r\n    setUserName(\"\");\r\n    if (localVideoRef.current) {\r\n      localVideoRef.current.srcObject = null;\r\n    }\r\n    if (socket) socket.emit(\"leave-room\");\r\n  }\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {!joined ? (\r\n        <div style={styles.joinContainer}>\r\n          <h2>Ve Meet - Join or Create Room</h2>\r\n          <input\r\n            style={styles.input}\r\n            type=\"text\"\r\n            placeholder=\"Enter Room Code\"\r\n            value={roomId}\r\n            onChange={(e) => setRoomId(e.target.value)}\r\n          />\r\n          <input\r\n            style={styles.input}\r\n            type=\"text\"\r\n            placeholder=\"Enter Your Name\"\r\n            value={userName}\r\n            onChange={(e) => setUserName(e.target.value)}\r\n          />\r\n          <button style={styles.joinBtn} onClick={joinRoom}>\r\n            Join / Create Room\r\n          </button>\r\n          <div style={{ marginTop: 10, fontSize: 12, color: \"#666\" }}>\r\n            Room code is case-sensitive.\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div style={styles.topBar}>\r\n            <div>\r\n              <strong>Room:</strong> {roomId} | <strong>You:</strong> {userName}\r\n            </div>\r\n            <div>\r\n              <button style={styles.controlBtn} onClick={toggleMute}>\r\n                {muted ? \"Unmute\" : \"Mute\"}\r\n              </button>\r\n              <button style={styles.controlBtn} onClick={toggleVideo}>\r\n                {videoOff ? \"Start Video\" : \"Stop Video\"}\r\n              </button>\r\n              <button style={styles.controlBtn} onClick={toggleScreenShare}>\r\n                {screenSharing ? \"Stop Share\" : \"Share Screen\"}\r\n              </button>\r\n              <button\r\n                style={{ ...styles.controlBtn, backgroundColor: \"#e74c3c\" }}\r\n                onClick={endMeeting}\r\n              >\r\n                End Meeting\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={styles.main}>\r\n            <div style={styles.localVideoContainer}>\r\n              <div style={{ fontWeight: \"bold\", marginBottom: 6 }}>\r\n                You ({userName})\r\n              </div>\r\n              <video\r\n                ref={localVideoRef}\r\n                autoPlay\r\n                muted\r\n                playsInline\r\n                style={styles.localVideo}\r\n              />\r\n              <div style={{ marginTop: 10 }}>\r\n                <label>\r\n                  Camera:{\" \"}\r\n                  <select\r\n                    value={selectedCamera}\r\n                    onChange={(e) => setSelectedCamera(e.target.value)}\r\n                  >\r\n                    {availableCameras.map((cam) => (\r\n                      <option key={cam.deviceId} value={cam.deviceId}>\r\n                        {cam.label || \"Camera \" + cam.deviceId}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </label>\r\n                <br />\r\n                <label>\r\n                  Microphone:{\" \"}\r\n                  <select\r\n                    value={selectedMicrophone}\r\n                    onChange={(e) => setSelectedMicrophone(e.target.value)}\r\n                  >\r\n                    {availableMicrophones.map((mic) => (\r\n                      <option key={mic.deviceId} value={mic.deviceId}>\r\n                        {mic.label || \"Microphone \" + mic.deviceId}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={styles.remoteVideosContainer}>\r\n              {Object.entries(remoteStreams).map(([peerId, stream]) => (\r\n                <div key={peerId} style={styles.remoteVideoWrapper}>\r\n                  <video\r\n                    autoPlay\r\n                    playsInline\r\n                    ref={(video) => {\r\n                      if (video && stream) {\r\n                        video.srcObject = stream;\r\n                      }\r\n                    }}\r\n                    style={styles.remoteVideo}\r\n                  />\r\n                  <div style={styles.participantName}>Participant</div>\r\n                </div>\r\n              ))}\r\n              {Object.keys(remoteStreams).length === 0 && (\r\n                <div style={{ color: \"#888\", marginTop: 30 }}>\r\n                  No participants yet...\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div style={styles.participantList}>\r\n              <h3>Participants</h3>\r\n              <ul style={{ listStyle: \"none\", paddingLeft: 0 }}>\r\n                <li key=\"self\" style={styles.participantListItem}>\r\n                  {userName} (You)\r\n                </li>\r\n                {Object.keys(peersRef.current).map((peerId) => (\r\n                  <li key={peerId} style={styles.participantListItem}>\r\n                    {peerId}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\r\n    maxWidth: 1200,\r\n    margin: \"0 auto\",\r\n    padding: 20,\r\n  },\r\n  joinContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    maxWidth: 400,\r\n    margin: \"50px auto\",\r\n    border: \"1px solid #ddd\",\r\n    padding: 20,\r\n    borderRadius: 6,\r\n    backgroundColor: \"#f9f9f9\",\r\n    boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n  },\r\n  input: {\r\n    padding: \"10px 12px\",\r\n    marginBottom: 10,\r\n    fontSize: 16,\r\n    borderRadius: 4,\r\n    border: \"1px solid #ccc\",\r\n  },\r\n  joinBtn: {\r\n    padding: \"12px 16px\",\r\n    fontSize: 16,\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#0066ff\",\r\n    color: \"white\",\r\n    border: \"none\",\r\n    borderRadius: 4,\r\n  },\r\n  topBar: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: 15,\r\n    alignItems: \"center\",\r\n  },\r\n  controlBtn: {\r\n    marginLeft: 8,\r\n    padding: \"8px 14px\",\r\n    fontSize: 14,\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#007bff\",\r\n    border: \"none\",\r\n    borderRadius: 4,\r\n    color: \"white\",\r\n  },\r\n  main: {\r\n    display: \"flex\",\r\n    gap: 16,\r\n    flexWrap: \"wrap\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  localVideoContainer: {\r\n    flex: \"1 1 300px\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    border: \"1px solid #ddd\",\r\n    padding: 10,\r\n    borderRadius: 6,\r\n    backgroundColor: \"#fafafa\",\r\n  },\r\n  localVideo: {\r\n    width: \"100%\",\r\n    maxWidth: 320,\r\n    borderRadius: 6,\r\n    backgroundColor: \"black\",\r\n  },\r\n  remoteVideosContainer: {\r\n    flex: \"3 1 600px\",\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    gap: 12,\r\n    maxHeight: \"70vh\",\r\n    overflowY: \"auto\",\r\n    border: \"1px solid #ddd\",\r\n    padding: 10,\r\n    borderRadius: 6,\r\n    backgroundColor: \"#fafafa\",\r\n  },\r\n  remoteVideoWrapper: {\r\n    flex: \"1 1 280px\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    marginBottom: 12,\r\n  },\r\n  remoteVideo: {\r\n    width: \"100%\",\r\n    borderRadius: 6,\r\n    backgroundColor: \"black\",\r\n  },\r\n  participantName: {\r\n    marginTop: 6,\r\n    fontWeight: \"bold\",\r\n    color: \"#444\",\r\n  },\r\n  participantList: {\r\n    flex: \"1 1 200px\",\r\n    borderLeft: \"1px solid #ddd\",\r\n    paddingLeft: 12,\r\n    maxHeight: \"70vh\",\r\n    overflowY: \"auto\",\r\n  },\r\n  participantListItem: {\r\n    padding: \"6px 0\",\r\n    borderBottom: \"1px solid #eee\",\r\n  },\r\n};\r\n\r\nexport default VeMeetRoom;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}