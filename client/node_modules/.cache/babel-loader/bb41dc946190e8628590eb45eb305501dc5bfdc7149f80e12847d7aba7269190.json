{"ast":null,"code":"var _jsxFileName = \"C:\\\\projects\\\\Ve Meet\\\\client\\\\src\\\\components\\\\GuestRoom.js\",\n  _s = $RefreshSig$();\n// src/components/GuestRoom.js\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Peer from 'simple-peer';\nimport socket from '../socket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GuestRoom = () => {\n  _s();\n  const {\n    roomId\n  } = useParams();\n  const [name, setName] = useState('');\n  const [joined, setJoined] = useState(false);\n  const [hostStream, setHostStream] = useState(null);\n  const [myStream, setMyStream] = useState(null);\n  const [peer, setPeer] = useState(null);\n  const myVideoRef = useRef(null);\n  const hostVideoRef = useRef(null);\n  useEffect(() => {\n    if (myStream && myVideoRef.current) {\n      myVideoRef.current.srcObject = myStream;\n    }\n  }, [myStream]);\n  useEffect(() => {\n    if (hostStream && hostVideoRef.current) {\n      hostVideoRef.current.srcObject = hostStream;\n    }\n  }, [hostStream]);\n  const joinRoom = async () => {\n    if (!name) return alert(\"Please enter your name\");\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      });\n      setMyStream(stream);\n      socket.emit('join-room', {\n        roomId,\n        name\n      });\n      socket.on('host-signal', ({\n        signal,\n        hostSocketId\n      }) => {\n        const guestPeer = new Peer({\n          initiator: false,\n          trickle: false,\n          stream: stream\n        });\n        guestPeer.on('signal', data => {\n          socket.emit('return-signal', {\n            signal: data,\n            to: hostSocketId\n          });\n        });\n        guestPeer.on('stream', stream => {\n          setHostStream(stream);\n        });\n        guestPeer.signal(signal);\n        setPeer(guestPeer);\n        setJoined(true);\n      });\n    } catch (err) {\n      console.error('Error accessing media devices:', err);\n      alert('Could not access camera/microphone');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundColor: '#000',\n      color: 'gold',\n      height: '100vh',\n      padding: '2rem'\n    },\n    children: !joined ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          fontSize: '2rem',\n          marginBottom: '1rem'\n        },\n        children: [\"Join Room: \", roomId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter your name\",\n        value: name,\n        onChange: e => setName(e.target.value),\n        style: {\n          padding: '0.5rem 1rem',\n          fontSize: '1rem',\n          border: '2px solid gold',\n          borderRadius: '8px',\n          backgroundColor: '#111',\n          color: 'gold',\n          marginBottom: '1rem'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: joinRoom,\n        style: {\n          padding: '0.6rem 1.5rem',\n          backgroundColor: 'gold',\n          color: '#000',\n          border: 'none',\n          fontWeight: 'bold',\n          borderRadius: '8px',\n          cursor: 'pointer',\n          fontSize: '1rem'\n        },\n        children: \"Join Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '2rem',\n        justifyContent: 'center',\n        marginTop: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: [\"You (\", name, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n          ref: myVideoRef,\n          autoPlay: true,\n          playsInline: true,\n          muted: true,\n          style: {\n            width: '300px',\n            borderRadius: '12px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: \"Host\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n          ref: hostVideoRef,\n          autoPlay: true,\n          playsInline: true,\n          style: {\n            width: '300px',\n            borderRadius: '12px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(GuestRoom, \"iNupcExBgNobbpwry3LNq2IozZU=\", false, function () {\n  return [useParams];\n});\n_c = GuestRoom;\nexport default GuestRoom;\nvar _c;\n$RefreshReg$(_c, \"GuestRoom\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useParams","Peer","socket","jsxDEV","_jsxDEV","GuestRoom","_s","roomId","name","setName","joined","setJoined","hostStream","setHostStream","myStream","setMyStream","peer","setPeer","myVideoRef","hostVideoRef","current","srcObject","joinRoom","alert","stream","navigator","mediaDevices","getUserMedia","video","audio","emit","on","signal","hostSocketId","guestPeer","initiator","trickle","data","to","err","console","error","style","backgroundColor","color","height","padding","children","textAlign","fontSize","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","border","borderRadius","onClick","fontWeight","cursor","display","gap","justifyContent","marginTop","ref","autoPlay","playsInline","muted","width","_c","$RefreshReg$"],"sources":["C:/projects/Ve Meet/client/src/components/GuestRoom.js"],"sourcesContent":["// src/components/GuestRoom.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport Peer from 'simple-peer';\r\nimport socket from '../socket';\r\n\r\nconst GuestRoom = () => {\r\n  const { roomId } = useParams();\r\n  const [name, setName] = useState('');\r\n  const [joined, setJoined] = useState(false);\r\n  const [hostStream, setHostStream] = useState(null);\r\n  const [myStream, setMyStream] = useState(null);\r\n  const [peer, setPeer] = useState(null);\r\n\r\n  const myVideoRef = useRef(null);\r\n  const hostVideoRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (myStream && myVideoRef.current) {\r\n      myVideoRef.current.srcObject = myStream;\r\n    }\r\n  }, [myStream]);\r\n\r\n  useEffect(() => {\r\n    if (hostStream && hostVideoRef.current) {\r\n      hostVideoRef.current.srcObject = hostStream;\r\n    }\r\n  }, [hostStream]);\r\n\r\n  const joinRoom = async () => {\r\n    if (!name) return alert(\"Please enter your name\");\r\n\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\r\n      setMyStream(stream);\r\n\r\n      socket.emit('join-room', { roomId, name });\r\n\r\n      socket.on('host-signal', ({ signal, hostSocketId }) => {\r\n        const guestPeer = new Peer({\r\n          initiator: false,\r\n          trickle: false,\r\n          stream: stream,\r\n        });\r\n\r\n        guestPeer.on('signal', (data) => {\r\n          socket.emit('return-signal', { signal: data, to: hostSocketId });\r\n        });\r\n\r\n        guestPeer.on('stream', (stream) => {\r\n          setHostStream(stream);\r\n        });\r\n\r\n        guestPeer.signal(signal);\r\n        setPeer(guestPeer);\r\n        setJoined(true);\r\n      });\r\n    } catch (err) {\r\n      console.error('Error accessing media devices:', err);\r\n      alert('Could not access camera/microphone');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#000', color: 'gold', height: '100vh', padding: '2rem' }}>\r\n      {!joined ? (\r\n        <div style={{ textAlign: 'center' }}>\r\n          <h1 style={{ fontSize: '2rem', marginBottom: '1rem' }}>Join Room: {roomId}</h1>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Enter your name\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            style={{\r\n              padding: '0.5rem 1rem',\r\n              fontSize: '1rem',\r\n              border: '2px solid gold',\r\n              borderRadius: '8px',\r\n              backgroundColor: '#111',\r\n              color: 'gold',\r\n              marginBottom: '1rem',\r\n            }}\r\n          />\r\n          <br />\r\n          <button\r\n            onClick={joinRoom}\r\n            style={{\r\n              padding: '0.6rem 1.5rem',\r\n              backgroundColor: 'gold',\r\n              color: '#000',\r\n              border: 'none',\r\n              fontWeight: 'bold',\r\n              borderRadius: '8px',\r\n              cursor: 'pointer',\r\n              fontSize: '1rem',\r\n            }}\r\n          >\r\n            Join Now\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div style={{ display: 'flex', gap: '2rem', justifyContent: 'center', marginTop: '2rem' }}>\r\n          <div>\r\n            <h3 style={{ textAlign: 'center' }}>You ({name})</h3>\r\n            <video ref={myVideoRef} autoPlay playsInline muted style={{ width: '300px', borderRadius: '12px' }} />\r\n          </div>\r\n          <div>\r\n            <h3 style={{ textAlign: 'center' }}>Host</h3>\r\n            <video ref={hostVideoRef} autoPlay playsInline style={{ width: '300px', borderRadius: '12px' }} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GuestRoom;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}